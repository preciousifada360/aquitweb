{%extends 'aquits/app.joinaquits.com/blocks/ally/header.html'%} {%block title%}Acquits | Programs {%endblock%}

<div class="sub-menu-nav">
    <ul class="sub-menu-tabs centered">
        <li class="menu-li active secondary_menu_hover" data-filter="submenu-item-weeks" style="position:relative">
            <span>Weeks</span>
        </li>
        <li class="menu-li secondary_menu_hover" data-filter="submenu-item-categories">
            <span>Categories</span>
        </li>
    </ul>
</div>
</div>
<div class="pad-top100">
</div>
<div class="ajax-notifications container notifications hidden">
</div>
<script>
    // click on params submenu
    var submenu_route = "";
    $(document).ready(function() {
        window.setTimeout(function() {
            $('[data-filter=submenu-item-' + submenu_route + ']').click();
            $('[data-filter=submenu-secondary-item-' + submenu_route + ']').click();
            $('[data-filter=submenu-secondary-item-' + submenu_route + ']').closest('.secondary_menu').hide();
        }, 1000);
    })
</script>
<div class="container">
    <div class="sub-menu-panels program">
        <div id="submenu-item-weeks">
            <div id="program">
                <div class="category-header">
                    <div class="category-wrapper">
                        <div class="title">Building a Foundation</div>
                        <div class="description">To seek even more healing in your life, it is important to first build a foundation of understanding and knowledge - something that will help you throughout your recovery journey.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="program-category-courses">
                        <a href="library/lessons/1050929762.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/1068298952/course_1502468060.2440383.png" alt="Course 1502468060.2440383" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 1</div>
                                            <div class="lesson-card-course-title">Launch: Turning Toward the Life We (Really) Want</div>
                                            <div class="lesson-card-course-description scrollable">No matter what has happened before, this can be a new moment - unlike any that has come before. In this week, we look with fresh eyes at who you are, where you are, and the science behind how you got here. We
                                                end the week introducing a practical tool to get moving towards real change. </div>
                                            <div class="time-bottom">1 hour 53 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050930272.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/829913840/course_1502301659.0141943.png" alt="Course 1502301659.0141943" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 2</div>
                                            <div class="lesson-card-course-title">Lasting: Going After Long-term Change</div>
                                            <div class="lesson-card-course-description scrollable">Anyone can change...for a while. But what does it really take to find a long-term shift? We spend this week exploring different kinds of change and the spectrum of struggle that people face. An understanding
                                                of current brain science combined with a wise approach to fighting can help set people on a course to a truly sustainable healing process. </div>
                                            <div class="time-bottom">1 hour 56 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050930652.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/1068298962/course_1502301680.4830315.png" alt="Course 1502301680.4830315" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 3</div>
                                            <div class="lesson-card-course-title">Resurgence: Rise &amp; Rise Again</div>
                                            <div class="lesson-card-course-description scrollable">While it&#39;s so nice to believe we can make this change quickly, for most people, it takes time – and the guts to get up over (and over) again... Rather than getting deflated by the struggle, what if we learned
                                                from it and found ways to connect to anchors deeper than the turbulence? We&#39;ll be talking this week about actually having some fun with this – and turning it into the adventure of a lifetime.</div>
                                            <div class="time-bottom">1 hour 55 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="category-header">
                    <div class="category-wrapper">
                        <div class="title">Basic Training</div>
                        <div class="description">Get ready to build up a sweat as you explore and practice several strategies that will guide you through your journey.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="program-category-courses">
                        <a href="library/lessons/1050930612.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/18714240/course_1542217336.063727.png" alt="Course 1542217336.063727" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 4</div>
                                            <div class="lesson-card-course-title">Sanctuary: Creating a Nourishing Ambience</div>
                                            <div class="lesson-card-course-description scrollable">A first, most basic foundation of freedom is setting up external systems, schedules and structures that work in your favor – pre-empting struggles and preparing you for when they arrive. As you notice signs
                                                of them on the horizon, you can also do things to protect yourself in advance. All right ahead! </div>
                                            <div class="time-bottom">1 hour 36 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050931508.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/789835605/course_1502302104.032601.png" alt="Course 1502302104.032601" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 5</div>
                                            <div class="lesson-card-course-title">Tactics: Martial Arts for the Mind</div>
                                            <div class="lesson-card-course-description scrollable">As important as external protections are, without killer internal defenses, you can still be infiltrated. We step through a number of practices this week that can help you skillfully ground yourself and let
                                                urges pass - touching on the larger explanation for why they are effective too. </div>
                                            <div class="time-bottom">2 hours 56 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050930532.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/156719688/course_1502386562.2363484.png" alt="Course 1502386562.2363484" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 6</div>
                                            <div class="lesson-card-course-title">Inner: From Hard Work to Heart Work</div>
                                            <div class="lesson-card-course-description scrollable">If we get lost in outer changes and skills, we might miss the heart of recovery - namely, the change of basic desires that is possible. This week we touch on a variety of ways to help this kind of deeper, inner
                                                change to start happening for you. </div>
                                            <div class="time-bottom">2 hours 17 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="category-header">
                    <div class="category-wrapper">
                        <div class="title">Digging Deeper</div>
                        <div class="description">Addressing the root contributors to your struggle with pornography is essential to your recovery. During the next few weeks we are going to dive in and explore several potential contributors and find out ways we can heal or improve
                            your most vulnerable areas of life.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="program-category-courses">
                        <a href="library/lessons/1050931412.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/404021192/course_1542217426.8579552.png" alt="Course 1542217426.8579552" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 7</div>
                                            <div class="lesson-card-course-title">Strength: Fortify Yourself</div>
                                            <div class="lesson-card-course-description scrollable">So how healthy, well and strong do you feel in your overall life? What if you could do something about that - independent of the struggle we&#39;ve been talking about? We&#39;ve found that this is one way to
                                                super-charge your recovery - and we&#39;ll touch on several ways to make that happen this week. </div>
                                            <div class="time-bottom">2 hours 15 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050931377.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/145474133/course_1542217378.6827202.png" alt="Course 1542217378.6827202" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 8</div>
                                            <div class="lesson-card-course-title">Connection: Fortify Relationships</div>
                                            <div class="lesson-card-course-description scrollable">Just as this struggle is not an isolated problem, finding the way out is no isolated path. We&#39;ve found that as you strengthen and nourish relationships, your power to overcome grows more and more. Those
                                                relationships can be huge strengths as you move towards lasting freedom. </div>
                                            <div class="time-bottom">1 hour 21 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050931376.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/1068298946/course_1502302190.4786668.png" alt="Course 1502302190.4786668" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 9</div>
                                            <div class="lesson-card-course-title">Peace: Fortify Your World</div>
                                            <div class="lesson-card-course-description scrollable">Daily interactions with the world around us can wear us down – and create stress, fatigue and other conditions making it more likely to use. What would it mean to turn this equation around – beginning to relate
                                                to the outside world in a way that left us stronger and at ease? We&#39;ve found this is another powerful way to Fortify ourselves. </div>
                                            <div class="time-bottom">1 hour 53 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="category-header">
                    <div class="category-wrapper">
                        <div class="title">Looking Ahead</div>
                        <div class="description">We have fortified you with tools and strategies for success. That does not mean that the rest of your journey is going to be easy. During the next few weeks we will discuss ways to keep fighting even when you are feeling like giving
                            up as well as how to take your fight to the next level!</div>
                    </div>
                </div>
                <div class="row">
                    <div class="program-category-courses">
                        <a href="library/lessons/1050931397.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/1045457617/course_1502302218.6213968.png" alt="Course 1502302218.6213968" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 10</div>
                                            <div class="lesson-card-course-title">Relentless: As Long As It Takes</div>
                                            <div class="lesson-card-course-description scrollable">It&#39;s easy enough to put a time-limit or deadline on our recovery: &#39;by then I should be completely over this.&#39; That&#39;s great if it works – but what if this takes longer than we thought? That will
                                                take stamina, fortitude – and the wisdom to not burn out. This will be our focus this week. </div>
                                            <div class="time-bottom">1 hour 58 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050931282.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/1068298992/course_1502385256.6024432.png" alt="Course 1502385256.6024432" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 11</div>
                                            <div class="lesson-card-course-title">Passion: Fighting for Love</div>
                                            <div class="lesson-card-course-description scrollable">As you get better – and feeling more yourself – what about your loved ones (especially those closest to you)? We dive deep this week into how to restore and heal romance – and make it come alive again. </div>
                                            <div class="time-bottom">1 hour 21 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a href="library/lessons/1050931501.html">
                            <div class="lesson_card">
                                <div class="col-sm-4">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="lesson-card-img-holder">
                                                <img class="img-circle my-image" src="https://s3-us-west-2.amazonaws.com/fortify-production/uploads/library/course/banner/660159341/course_1502468123.2578275.png" alt="Course 1502468123.2578275" />
                                            </div>
                                            <div class="lesson-card-week-count">Week 12</div>
                                            <div class="lesson-card-course-title">Tomorrow: Your Amazing Future</div>
                                            <div class="lesson-card-course-description scrollable">Rather than claiming to be &#39;the answer,&#39; we&#39;ve tried to point you in the direction of everything that can help you find your freedom. The entire focus of Fortify is to prepare you for what comes
                                                afterward - so that the months and years ahead get better and better. We&#39;ll look forward into the future this week. </div>
                                            <div class="time-bottom">1 hour 26 mins</div>
                                        </div>
                                        <footer>
                                            <div class="row">
                                                <div class="progress-horizontal">
                                                    <div class="col-xs-10">
                                                        <div class="bar-background">
                                                            <div class="bar-content" style="width:0.0%">&nbsp</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                        <div class="legend">
                                                            <p class="percentage">0%</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="hidden" id="submenu-item-categories">
        </div>
    </div>
</div>
</div>
<script>
    ajax_call_for_partial('.menu-li[data-filter=submenu-item-categories]', Routes.program_categories_path())
</script>
<div id="billing-wrapper">
</div>
</div>
</div>
<div data-turbolinks-permanent="" id="message-bar-holder">
    <div class="load-messages-init">
        <script>
            $(document).ready(function() {
                        if ($('.load-messages-init').length > 0) {
                            $.get(Routes.profile_show_messagebar_path() + '.js').fail(function() {
                                $('#message-bar-holder').html("<div class=\"message-bar\" id=\"message\"> <
                                    div class = \"message-home\"> <
                                    div class = \"message-people-holder\" data-holder-type=\"messages\"> <
                                    div class = \"message-header\"> <
                                    span > Messages < \/span> <
                                    div class = \"new-msg\" onclick=\"open_chat_window(&#39;add_new&#39;);load_message_targets()\"> << ?
                                    xml version = \"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"100%\" height=\"100%\" viewbox=\"0 0 43 43\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <!-- Generator: Sketch 50.2 (55047) - http://www.bohemiancoding.com/sketch -->\n    <title>times_black<\/title>\n    <desc>Created with Sketch.<\/desc>\n    <defs> <\ / defs > \n < g id = \"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g id=\"times_black\" transform=\"translate(21.000000, 22.000000) rotate(45.000000) translate(-21.000000, -22.000000) translate(6.000000, 7.000000)\" fill=\"#979797\" fill-rule=\"nonzero\" stroke=\"#979797\" stroke-width=\"2\">\n            <path d=\"M0.032,0.047 L29.873,29.716\" id=\"Stroke-23\"> <\ / path > \n < path d = \"M29.8732,0.047 L0.0322,29.716\" id=\"Stroke-25\"> <\ / path > \n < \/g>\n    <\/g>\n<\/svg>\n<\/div> <
                                    div class = \"message-people-holder-inner\" style=\"height: calc(100vh - 100px);\"> <
                                    div class = \"container centered\" id=\"maintenance\"> <
                                    div class = \"row\"> <
                                    div class = \"col-sm-8 col-sm-offset-2\"> <
                                    img src = \"/assets/pages/maintenance-ec33cd09b82854ac09709ec64b3ec45a32e48419c36d64e5e554ea94596ebfc4.png\" alt=\"Maintenance\" /> <\ / div > < \/div> <
                                    div > There was an error. < br / > Please visit back shortly! < br / > If the problem persists, please report to support via intercom. < br / >
                                    <
                                    br / >
                                    <
                                    br / > -The Recovery Team - < \/div> <\ /
                                    div > < \/div> <\ /
                                    div > < \/div> <\ /
                                    div > <
                                    div class = \"exit-msg\"> << ?
                                    xml version = \"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg width=\"100%\" height=\"100%\" viewbox=\"0 0 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <!-- Generator: Sketch 39.1 (31720) - http://www.bohemiancoding.com/sketch -->\n    <title>Artboard-1<\/title>\n    <desc>Created with Sketch.<\/desc>\n    <defs> <\ / defs > \n < g id = \"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g id=\"Group-48\" transform=\"translate(-229.000000, 1.000000)\" stroke-width=\"2\" stroke=\"#979797\" fill=\"#979797\">\n            <g id=\"Group-47\" transform=\"translate(230.000000, 0.000000)\">\n                <g id=\"times_black\">\n                    <g id=\"Icon\">\n                        <g id=\"Page-1\">\n                            <g id=\"Artboard-1\">\n                                <g id=\"Icon\">\n                                    <path d=\"M0.032,0.047 L29.873,29.716\" id=\"Stroke-23\"> <\ / path > \n < path d = \"M29.8732,0.047 L0.0322,29.716\" id=\"Stroke-25\"> <\ / path > \n < \/g>\n                            <\/g>\n                        <\/g>\n                    <\/g>\n                <\/g>\n            <\/g>\n        <\/g>\n    <\/g>\n<\/svg>\n<\/div> <
                                    script > run_message_init();\ n\ nfunction run_message_init() {\
                                        n console.log(\"message init!\")\n  chat_room_containers = $(\'.chat_room_container\')\n  if (App.cable.subscriptions[\'subscriptions\'].length > 0){\n    for(i=App.cable.subscriptions[\'subscriptions\'].length-1;i>=0;i--){\n      App.cable.subscriptions.remove(App.cable.subscriptions[\'subscriptions\'][i])\n      if (i == 0){\n        setTimeout(function(){\n          connect_messages();\n        }, 1000);\n      }\n    }\n  }\n  else{\n    connect_messages();\n  }\n\n  function connect_messages(){\n    disable_text_areas()\n    if (chat_room_containers.length > 0){\n      $(\'.chat_room_container\').unbind();\n      $(\'.chat_room_container\').each(function(){\n        container = $(this);\n        App.global_chat = App.cable.subscriptions.create(\n          {\n            channel: \"ChatRoomsChannel\",\n            chat_room_id: container.data(\'chat-room-id\')\n          },\n          {\n            connected: function(data) {\n              // Called when there\'s incoming data on the WebSocket for this channel.\n              // Update the page with the newest broadcast data.\n              console.log(\'connected\')\n              activate_text_areas()\n            },\n\n            disconnected: function(data) {\n              // Called when there\'s incoming data on the WebSocket for this channel.\n              // Update the page with the newest broadcast data.\n              console.log(\'disconnected\')\n              disable_text_areas()\n            },\n\n            received: function(data) {\n              console.log(\"received messages init\")\n              if (data[\'method\'] == \'update\') {\n                $(\'.message-row[data-message-id=\' + data[\'message_id\'] + \']\').find(\'.message-body\').html(data[\'message_body\'])\n              }\n              else if (data[\'method\'] == \'destroy\') {\n                destroy_message_broadcast(data[\'message_id\'])\n              }\n              else{\n                //room_id = $(data[\'message\']).attr(\'data-message-chat-room-id\')\n                room_id = data[\'chat_room_id\']\n                reorder_chat(room_id)\n                target_divs = $(\"[data-chat-room-id=\" + room_id + \"]\").find(\'.messages-holder-inner\');\n                target_divs.each(function(){\n                  $(this).append(message_div({\n                    message_id: data[\'message_id\'],\n                    sender_id: data[\'sender_id\'],\n                    receiver_id: data[\'receiver_id\'],\n                    chat_room_id: data[\'chat_room_id\'],\n                    data_time: data[\'data_time\'],\n                    data_day: data[\'data_day\'],\n                    message: data[\'message\'],\n                    sender_color: data[\'sender_color\'],\n                    sender_points: data[\'sender_points\'],\n                    video: data[\'video\'],\n                    video_thumb: data[\'video_thumb\'],\n                    sender_name: data[\'sender_name\'],\n                    sender_image: data[\'sender_image\'],\n                    message_created_at_in_utc: data[\'message_created_at_in_utc\']\n                  }))\n                  clean_message_ui()\n                  $(this).closest(\'.messages-holder\').scrollTop($(this).height())\n                  if ($(\'html\').attr(\'data-messageroom-page-id\') != room_id){\n                    $(\'.message-person[data-chatroomholder-id=\'+room_id+\']\').find(\'.message_count\').html(parseInt($(\'.message-person[data-chatroomholder-id=\'+room_id+\']\').find(\'.message_count\').html()) + 1)\n                    $(\'.message-person[data-chatroomholder-id=\'+room_id+\']\').find(\'.badge\').addClass(\'pinkbg\').removeClass(\'hidden\')\n                  }\n                });\n\n                if ($(\'html\').attr(\'data-messageroom-page-id\') != room_id){\n                  check_new_message();\n                }\n                else{\n                  $(\'[data-chatroomholder-id=\' + room_id + \']\').click();\n                }\n\n                append_settings(data[\'message_id\'], data[\'sender_id\']);\n\n              }\n            },\n\n            send_message: function(message, chat_room_id, receiver_id) {\n              return this.perform(\'send_message\', {\n                message: message,\n                chat_room_id: chat_room_id,\n                receiver_id: receiver_id,\n                sender_id: \"1010612042\",\n                session_token: \"afgZQUZeF5xkxMFDtS3y\"\n              });\n\n            }\n          }\n        );\n      })\n\n      $(\'.message-form-class\').closest(\'#new_message\').unbind();\n      $(\'.message-form-class\').closest(\'#new_message\').on(\'submit\', function(e){\n        textarea = $(this).find(\'#message_body\')\n        room_id = $(this).closest(\'.chat_room_container\').data(\'chat-room-id\')\n        if ($.trim(textarea.val()).length > 0){\n          App.global_chat.send_message(removeTags(textarea.val()), room_id, $(this).find(\'.receiver_input\').val())\n          textarea.val(\'\')\n        }\n        e.preventDefault();\n        return false\n      })\n    }\n\n  }\n}\n\n$(\'.load-more-span\').click(function(){\n  load_messages($(this));\n  $(this).addClass(\'hidden\');\n  $(this).closest(\'.load-more\').find(\'.loading\').removeClass(\'hidden\');\n})\n\nfunction load_messages(target_element){\n  first_message_id = target_element.closest(\'.messages-holder\').find(\'.message-row\').first().attr(\'data-message-id\');\n  chat_room_id = target_element.closest(\'.chat_room_container\').attr(\'data-chat-room-id\');\n  $.ajax({\n    url: Routes.load_more_messages_chat_room_path( chat_room_id ),\n    type: \"get\",\n    datatype: \"js\",\n    data: {first_message_id: first_message_id},\n    success: function(data){\n      //handled in the .js.erb\n    },\n    error: function(data){\n      show_ajax_alert(\"There was a problem. Please contact the admin if the problem persists.\");\n    }\n  });\n}\n\nfunction destroy_message_broadcast(message_id){\n  target_row = $(\'.message-row[data-message-id=\' + message_id + \']\')\n  target_row.slideUp();\n  if(target_row.find(\'.message-row-details\').hasClass(\'hidden\')==false){\n    if (target_row.next().hasClass(\'message-row\')){\n      next_row = target_row.next();\n    }\n    else{\n      next_row = target_row.next().next();\n    }\n\n    if(next_row.find(\'.message-row-details\').hasClass(\'hidden\')){\n      if(target_row.next().hasClass(\'message-row\')){\n        target_row.next().find(\'.message-row-image\').removeClass(\'hidden\');\n        target_row.next().find(\'.message-row-details\').removeClass(\'hidden\');\n        target_row.next().find(\'.mar-top-18\').removeClass(\'mar-top-18\');\n\n      }\n      else{\n        target_row.next().next().find(\'.message-row-image\').removeClass(\'hidden\');\n        target_row.next().next().find(\'.message-row-details\').removeClass(\'hidden\');\n        target_row.next().next().find(\'.mar-top-18\').removeClass(\'mar-top-18\');\n      }\n    }\n  }\n  setTimeout(function(){\n    target_row.remove();\n  }, 1000);\n}\n\nfunction message_div(params){\n  //console.log(\"message_div for Joeys test\")\n  //console.log(params)\n  //console.log(params[\'video\'])\n  //console.log(params[\'video_thumb\'])\n  //console.log(params[\'video_thumb\'] === null)\n  if(params[\'video_thumb\'] === null){\n    return (\'<div class=\"card-row message-row message-row-data time-data-before-change\" data-day=\"\' + params[\'data_day\'] + \'\" data-message-chat-room-id=\"\' + params[\'chat_room_id\'] + \'\" data-message-id=\"\' + params[\'message_id\'] + \'\" data-sender=\"\' + params[\'sender_id\'] + \'\" data-time=\"\' + params[\'data_time\'] + \'\">\\\n            <div class=\"message-row-inner\">\\\n              <div class=\"message-row-image message-hide\" style=\"border:solid 2px \' + params[\'sender_color\'] + \'\">\\\n                <img class=\"img-circle\" src=\"\' + params[\'sender_image\'] + \'\" alt=\"Avatar 1500477195.6257865\">\\\n              <\/div>\\\n              <div class=\"message-mar\">\\\n                <div class=\"message-row-details message-hide\">\\\n                  <span class=\"message-row-username\">\' + params[\'sender_name\'] + \'<\/span>\\\n                  <div class=\"user_stats\" style=\"display:inline-block\">\\\n                    <div class=\"pill\" style=\"background-color:\' + params[\'sender_color\'] + \'\">\' + params[\'sender_points\'] + \'<\/div>\\\n                  <\/div>\\\n                  <span class=\"time-stamp time-before-change\">\' + params[\'message_created_at_in_utc\'] + \'<\/span>\\\n                <\/div>\\\n                <div class=\"message-row-body\">\\\n                  <div class=\"message-body\">\\\n                    <p>\' +  simpleFormat2(removeTags(params[\'message\'])) + \'<\/p>\\\n                  <\/div>\\\n                <\/div>\\\n              <\/div>\\\n            <\/div>\\\n            <div class=\"divider-row different-date before-change\" style=\"display: block;\">\\\n              <span>\' + params[\'message_created_at_in_utc\'] + \'<\/span>\\\n            <\/div>\\\n           <\/div>\')\n  }\n  else{\n    return (\'<div class=\"card-row message-row message-row-data time-data-before-change\" data-day=\"\' + params[\'data_day\'] + \'\" data-message-chat-room-id=\"\' + params[\'chat_room_id\'] + \'\" data-message-id=\"\' + params[\'message_id\'] + \'\" data-sender=\"\' + params[\'sender_id\'] + \'\" data-time=\"\' + params[\'data_time\'] + \'\">\\\n      <div class=\"message-row-inner\">\\\n        <div class=\"message-row-image message-hide\" style=\"border:solid 2px \' + params[\'sender_color\'] + \'\">\\\n          <img class=\"img-circle\" src=\"\' + params[\'sender_image\'] + \'\" alt=\"Avatar 1500477195.6257865\">\\\n        <\/div>\\\n        <div class=\"message-mar\">\\\n          <div class=\"message-row-details message-hide\">\\\n            <span class=\"message-row-username\">\' + params[\'sender_name\'] + \'<\/span>\\\n            <div class=\"user_stats\" style=\"display:inline-block\">\\\n              <div class=\"pill\" style=\"background-color:\' + params[\'sender_color\'] + \'\">\' + params[\'sender_points\'] + \'<\/div>\\\n            <\/div>\\\n            <span class=\"time-stamp time-before-change\">\' + params[\'message_created_at_in_utc\'] + \'<\/span>\\\n          <\/div>\\\n          <div class=\"message-row-body\">\\\n            <div class=\"message-body\" onclick=\"play_video_message(\' + params[\'message_id\'] + \')\">\\\n              <div class=\"video-thumb-wrapper\">\\\n                <img class=\"video-message-thumb\" src=\' + params[\'video_thumb\'] + \'>\\\n                <div class=\"video-message-play\"> <\ / div > \\\n < \/div>\\\n            <\/div>\\\n          <\/div>\\\n        <\/div>\\\n      <\/div>\\\n      <div class=\"divider-row different-date before-change\" style=\"display: block;\">\\\n        <span>\' + params[\'message_created_at_in_utc\'] + \'<\/span>\\\n      <\/div>\\\n     <\/div>\')\n  }\n}\n\nfunction clean_message_ui(){\n  time = $(\'.time-before-change\').html();\n  newtime = moment(time).format(\'LT\');\n  / / newtime = moment(time).add(time_offset, \'hours\').format(\'LT\');\n  $(\'.time-before-change\').html(newtime);\n  $(\'.time-before-change\').removeClass(\'time-before-change\');\n\n  // For divider\n  time_for_divider = $(\'.different-date.before-change span\').html();\n  newtime_for_divider = moment(time_for_divider).add(time_offset,\'seconds\').format(\'MMM DD, YYYY\');\n  $(\'.different-date.before-change span\').html(newtime_for_divider);\n  $(\'.different-date.before-change\').removeClass(\'before-change\')\n\n  // For data-day\n  time_for_data_day = $(\'.time-data-before-change\').attr(\'data-day\');\n  newtime_for_data_day = moment(time_for_data_day).add(time_offset,\'seconds\').format(\'MMM DD, YYYY\');\n  $(\'.time-data-before-change\').attr(\'data-day\', newtime_for_data_day);\n  $(\'.time-data-before-change\').removeClass(\'time-data-before-change\')\n\n  curr_row = $(\'.message-row-data\').closest(\'.messages-holder\').find(\'.card-row\').last();\n  curr_sender_id = curr_row.attr(\'data-sender\');\n  curr_time = curr_row.attr(\'data-time\');\n  curr_day = curr_row.attr(\'data-day\');\n  prev_row = $(\'.message-row-data\').closest(\'.messages-holder\').find(\'.card-row\').last().prev();\n  prev_sender_id = prev_row.attr(\'data-sender\');\n  prev_time = prev_row.attr(\'data-time\');\n  prev_day = prev_row.attr(\'data-day\');\n\n  $(\'.different-date\').hide();\n\n  if (curr_day != prev_day){\n    $(\'.different-date\').show();\n    $(\'.different-date\').closest(\'.card-row\').find(\'.message-row-inner\').addClass(\'mar-top15\');\n  }\n\n  else if (prev_sender_id == curr_sender_id && parseInt(curr_time) < parseInt(prev_time) + 60){\n    $(\'.message-hide\').addClass(\'hidden\');\n    $(\'.message-mar\').addClass(\'mar-top-18\');\n  }\n\n  $(\'.message-hide\').removeClass(\'message-hide\');\n  $(\'.message-mar\').removeClass(\'message-mar\');\n  $(\'.different-date\').removeClass(\'different-date\');\n  $(\'.message-row-data\').removeClass(\'message-row-data\');\n}\n\n//ui functions\n\nfunction disable_text_areas(){\n  $(\'.chats_input\').css(\'background-color\', \'#dee1e2\').attr(\'placeholder\',\'Trying to Connect...\').prop(\'disabled\',true)\n}\nfunction disable_text_areas_due_to_subscription(){\n  $(\'.chats_input\').css(\'background-color\', \'#dee1e2\').attr(\'placeholder\',\'Please update your subscription to message...\').prop(\'disabled\',true)\n}\nfunction activate_text_areas(){\n  $(\'.chats_input\').css(\'background-color\', \'white\').attr(\'placeholder\',\'Write a Message\').prop(\'disabled\',false)\n}\n\nfunction append_settings(message_id, sender_id){\n  if (sender_id == \"1010612042\"){\n    $(\'.message-row[data-message-id=\' + message_id + \']\').find(\'.message-row-body\').addClass(\'my-message\').append(\'<span class=\"message-settings greyed\"> <
                                            i aria - hidden = \"true\" class=\"fa fa-cog settings-toggle\"> <\ / i > <
                                            div class = \"settings-box hidden\"> <
                                            a data - method = \"delete\" data-remote=\"true\" data-confirm=\"Are you sure?\" href=\"/messages/\' + message_id + \'\"> <
                                            div class = \"setting-items redded\">Remove<\/div> <\ / a > <
                                            a data - remote = \"true\" href=\"/messages/\' + message_id + \'/edit\"> <
                                            div class = \"setting-items\">Edit<\/div> <\ / a > < \/div> <\ / span > \')\n  }\n}\n\nfunction play_video_message(message_id){\n  overlay_in()\n  $.ajax({\n    url: Routes.play_video_message_path( message_id ) + \".js\",\n    type: \"get\",\n    success: function(data){\n      / / handled in the.js.erb\ n
                                        }, \n error: function(data) {\
                                            n show_ajax_alert(\"There was a problem. Please contact the admin if the problem persists.\");\n    }\n  });\n}\n\nfunction reorder_chat(room_id){\n  target_chat = $(\".message-person[data-chatroomholder-id=\" + room_id + \"]\")\n  $(\'.message-people-holder-inner\').prepend(target_chat)\n}\n\nfunction go_back_to_list(){\n  $(\'html\').toggleClass(\'message-detail-view-mode\');\n  $(\'html\').attr(\'data-messageroom-page-id\',\'\');\n  $(\'html\').attr(\'data-messageroom-id\',\'home\');\n}\n\n$(document).on(\'click\', \'.settings-toggle\', function(){\n  $(this).parent().find(\'.settings-box\').removeClass(\'hidden\')\n})\n\n$(document).on({\n  mouseenter: function(){\n    $(this).parent().find(\'.settings-box\').removeClass(\'hidden\')\n  },\n  mouseleave: function(){\n    $(this).parent().find(\'.settings-box\').addClass(\'hidden\')\n  }\n}, \'.settings-toggle\');\n\n$(document).on({\n  mouseenter: function(){\n    $(this).parent().find(\'.settings-box\').removeClass(\'hidden\')\n  },\n  mouseleave: function(){\n    $(this).parent().find(\'.settings-box\').addClass(\'hidden\')\n  }\n}, \'.settings-box\');\n\nfunction open_messagebar(chat_room_id){\n  $(\'html\').addClass(\'message-active\');\n  $(\'.message-person[data-chatroomholder-id=\' + chat_room_id + \']\').click()\n  dynamically_change_sizes();\n}\n\nfunction open_chat_window(chat_room_id){\n  console.log(\'open_chat_window\')\n  open_messagebar()\n  target_element = $(\'.message-person[data-chatroomholder-id=\' + chat_room_id + \']\')\n\n  $(\'#message .message-person\').toggleClass(\"user-active\", false);\n  $(target_element).toggleClass(\"user-active\", true);\n\n  $(\'.messages-baby\').addClass(\"hidden\");\n  $(\'.messages-baby.\'+chat_room_id).removeClass(\"hidden\");\n  $(\'html\').attr(\'data-messageroom-page-id\', chat_room_id)\n  $(\'html\').addClass(\'message-detail-view-mode\');\n  $(\'html\').attr(\'data-messageroom-id\',$(this).attr(\'data-id\'));\n\n  if(chat_room_id != \'add_new\' && chat_room_id != \'edit-chat-room\'){\n    //load more messages\n    if (target_element.hasClass(\'ajaxed\')){\n      //do nothing\n    }\n    else {\n      target_element.addClass(\'ajaxed\');\n      load_messages($(\'.messages-baby.\'+chat_room_id).find(\'.load-more-span\'));\n    }\n    //read\n    $.post( Routes.read_messages_chat_room_path(chat_room_id), function(data){});\n    //update ui\n    $(target_element).find(\'.readornot\').removeClass(\'pinkbg\');\n    $(target_element).find(\'.readornot\').addClass(\'hidden\')\n    $(target_element).find(\'.message_count\').html(\"0\");\n\n    check_new_message()\n  }\n}\n\nfunction chat_find_or_create(target_element){\n  if($(target_element).attr(\'data-chatroom-id\') != \"\"){\n    console.log(\'chat_find_or_create : find\')\n    chat_room_id = $(target_element).attr(\'data-chatroom-id\')\n    open_chat_window(chat_room_id)\n  }\n  else{\n    console.log(\'chat_find_or_create : create\')\n    create_chat_room([$(target_element).attr(\'data-user-id\')])\n  }\n}\n\nfunction create_chat_room(user_ids){\n  $.ajax({\n    url: Routes.create_custom_chat_rooms_path(),\n    type: \"post\",\n    datatype: \"js\",\n    data: { user_ids: user_ids }\n  })\n}\n\nfunction check_new_message(){\n  // return \"hello\"\n  $(\'.message-incoming\').addClass(\'hidden\');\n  new_message_count = 0;\n  // for messages bar\n  $(\'.message-people-holder\').each(function(){\n    folder_type = $(this).attr(\'data-holder-type\');\n    folder_count = 0;\n    $(this).find(\'.message_count\').each(function(){\n      if($(this).html() != \"0\"){\n        if (isNaN(parseInt($(this).html())) === false){\n          folder_count = folder_count + parseInt($(this).html())\n        }\n        $(this).closest(\'.readornot\').removeClass(\"hidden\")\n      }\n    })\n    if (folder_count > 0){\n      $(\'.message-folder[data-folder=\' + folder_type + \']\').find(\'.readornot\').removeClass(\'hidden\').find(\'.message_count\').html(folder_count);\n      new_message_count = new_message_count + folder_count;\n    }\n    else{\n      $(\'.message-folder[data-folder=\' + folder_type + \']\').find(\'.readornot\').addClass(\'hidden\').find(\'.message_count\').html(\"0\");\n    }\n  })\n\n  if (new_message_count > 0){\n    $(\'.message-incoming\').removeClass(\'hidden\');\n    $(\'.message-incoming\').html(new_message_count);\n  }\n\n  //for messages page\n  $(\'#message_page\').find(\'.message_count\').each(function(){\n    if($(this).html() != \"0\"){\n      if (isNaN(parseInt($(this).html())) === false){\n        new_message_count = new_message_count + parseInt($(this).html())\n      }\n      $(this).closest(\'.readornot\').removeClass(\"hidden\")\n      $(\'.message-incoming\').removeClass(\'hidden\');\n      $(\'.message-incoming\').html(new_message_count);\n    }\n  })\n  $(\'#message_page .message-people-holder\').each(function(){\n    this_folder = $(this);\n    this_folder.find(\'.message-person\').each(function(){\n     if($(this).find(\'.message_count\').html() > 0){\n       $(this).prependTo(this_folder);\n     }\n    });\n  });\n}\n\n$(document).ready(function(){\n\n  // ACTIVATE THE FIRST ELEMENTS IN EACH LIST SO IT\'S NOT BLANK\n  $(\'#message .message-person\').first().toggleClass(\"user-active\", true);\n\n  $(\'.exit-msg\').click(function(){\n    $(\'html\').toggleClass(\'message-active\');\n    dynamically_change_sizes();\n  })\n\n  $(\'.add-coach-message-bar\').click(function(){\n    $(\'html\').toggleClass(\'message-active\');\n    dynamically_change_sizes();\n  })\n\n  $(\'.message-bar-add-ally-container\').click(function(){\n    $(\'html\').toggleClass(\'message-active\');\n    dynamically_change_sizes();\n  })\n\n  // for /messages\n  $(\'#message_page .message-person\').unbind();\n  $(\'html\').attr(\'data-messageroom-page-id\', \"\");\n  $(\'#message_page .message-person\').click(function(){\n    $(\'html\').attr(\'data-messageroom-page-id\',$(this).attr(\'data-id\'));\n  })\n\n})<\/script> <\ / div > ")
                                        })
                                }
                            })

                            function open_messagebar() {
                                show_ajax_notification('Loading Messages..')
                            }
        </script>
    </div>
</div>
<div id="play-video">
</div>
<div id="transition-overlay" style="display:none;">
    <div class="spin-wrap">
        <div class="loader-wrapper">
            <img src="assets/loader-25c780675f29102a41804833cd3d2ae84147548b51fd411510b5ca844f1bd036.gif" alt="Loader" />
        </div>
    </div>
</div>
</body>

</html>